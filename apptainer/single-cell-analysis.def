Bootstrap: docker

# --- THIS IS THE FIX ---
#
# The "manifest unknown" error was because of a typo in the tag.
# It should end in "-runtime", not "-run".
#
# Corrected Tag:
From: nvcr.io/nvidia/rapidsai/rapidsai:25.04-cuda12.0-py3.11-ubuntu22.04-runtime
# ---

%labels
    Author: gchoudha@brown.edu
    Description: Apptainer image converted from the public NVIDIA RAPIDS container (v25.04)
    Contains: RAPIDS, scvi-tools, Seurat, PyTorch, Jupyter (CUDA 12.0)

%runscript
    echo "Container successfully converted from nvcr.io/nvidia/rapidsai/rapidsai:25.04-cuda12.0-py3.11-ubuntu22.04-runtime"
    echo "Run 'jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root' to start."
    exec /bin/bash

%post
    echo "Apptainer build complete. This container has RAPIDS and the single-cell analysis stack pre-installed."
    # No %post steps are needed as the container is pre-built by NVIDIA.

