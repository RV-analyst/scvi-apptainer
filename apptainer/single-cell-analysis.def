Bootstrap: docker
From: nvcr.io/nvidia/rapidsai/notebooks:25.04-cuda12.8-py3.11
# If you prefer CUDA 12.0, swap the line above to:
# From: nvcr.io/nvidia/rapidsai/notebooks:25.04-cuda12.0-py3.11

%labels
    Author: gchoudha@brown.edu
    Description: RAPIDS 25.04 + Jupyter for NVIDIA Single-Cell Blueprint (CUDA 12.x, Py3.11)
    Contains: RAPIDS, PyTorch, JupyterLab; easy to extend with scvi-tools/scanpy/etc.

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8

%post
    set -eux
    # Add anything you want baked in here (optional). Examples:
    # pip install --no-cache-dir "rapids-singlecell>=24.12" scvi-tools scanpy anndata
    # You can also apt-get R + Seurat, but consider a separate R SIF to keep this lean.

%runscript
    echo "RAPIDS 25.04 Jupyter (GPU-enabled). To start:"
    echo "  jupyter lab --ip=0.0.0.0 --port=\${PORT:-8888} --no-browser --allow-root"
    exec /bin/bash
