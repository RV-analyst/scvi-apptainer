name: scvi
channels:
  - conda-forge
  - pytorch
  - nvidia
dependencies:
  # Core
  - python=3.10
  - pip

  # GPU stack (matches base image CUDA 12.1)
  - pytorch=2.3.1
  - pytorch-cuda=12.1
  - cuda-version=12.1

  # scverse / analysis
  - scanpy=1.10.3
  - anndata=0.10.9
  - numpy=1.26
  - pandas=2.2
  - scipy=1.13
  - scikit-learn=1.5
  - umap-learn=0.5
  - matplotlib=3.9
  - seaborn=0.13
  - jupyterlab=4.2
  - ipykernel
  - ipywidgets

  # scvi + runtime deps (conda to avoid import-time surprises)
  - scvi-tools=1.1.5
  - pytorch-lightning=2.1
  - pyro-ppl
  - ml-collections
  - rich>=13,<15
  - python-annoy  # avoids compiling annoy from pip

  # Nice-to-haves often used in notebooks
  - h5py
  - numba
  - pynndescent

  - pip:
      - scrublet==0.2.3
