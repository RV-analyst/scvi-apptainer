Bootstrap: docker
From: nvcr.io/nvidia/pytorch:24.03-py3

%labels
    Maintainer gchoudha@brown.edu
    Description scRNA-seq environment with Scanpy + scVI (GPU-enabled)

%post
    apt-get update && apt-get install -y python3-pip python3-dev git && \
    pip install --upgrade pip wheel setuptools && \
    pip install scanpy scvi-tools anndata pandas numpy scikit-learn umap-learn \
                matplotlib seaborn plotly jupyterlab session-info && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    export MPLBACKEND=Agg

%runscript
    jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --NotebookApp.token=''
